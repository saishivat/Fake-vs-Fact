



<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Fake vs Fact Template</title>
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      padding: 20px;
      background-color: #f5f5f5;
    }

    input[type="file"] {
      display: none;
    }

    .custom-upload {
      background: #007BFF;
      color: white;
      padding: 10px 20px;
      margin: 10px;
      border-radius: 4px;
      cursor: pointer;
      display: inline-block;
    }

    input[type="text"], button {
      margin: 10px;
      padding: 10px;
    }

    .upload-status {
      color: green;
      font-weight: bold;
    }

    .preview {
      display: flex;
      gap: 20px;
      justify-content: center;
      margin: 20px;
    }

    .img-container {
      position: relative;
      text-align: center;
    }

    .img-container img {
      max-width: 300px;
      border: 2px solid #ccc;
    }

    .img-container h2 {
      margin: 5px 0;
      padding: 5px;
      color: white;
    }

    .watermark {
      position: absolute;
      top: 40%;
      left: -60px;
      transform: rotate(-45deg);
      font-size: 60px;
      color: rgba(255, 0, 0, 0.3);
      font-weight: bold;
      width: 500px;
      text-align: center;
      pointer-events: none;
      z-index: 10;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
    }

    #result img {
      max-width: 90%;
      margin-top: 20px;
      border: 2px solid #000;
    }

    .center-handle {
      position: absolute;
      top: 10px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(255,255,255,0.8);
      padding: 5px 10px;
      border-radius: 5px;
      font-weight: bold;
      z-index: 20;
    }
  </style>
</head>
<body>

  <h1>Fake vs Fact Image Template</h1>

  <label class="custom-upload">Upload Fake Image
    <input type="file" id="fakeInput" accept="image/*" onchange="handleUpload('fakeInput', true, 'fakeUploaded')">
  </label>
  <span id="fakeUploaded" class="upload-status"></span>

  <label class="custom-upload">Upload Fact Image
    <input type="file" id="factInput" accept="image/*" onchange="handleUpload('factInput', false, 'factUploaded')">
  </label>
  <span id="factUploaded" class="upload-status"></span>

  <br>
  <input type="text" id="twitterHandle" placeholder="Enter Twitter handle (e.g. @yourhandle)">
  <br>
  <button onclick="generateImage()">Generate Combined Image</button>

  <div class="preview">
    <div class="img-container">
      <h2 style="background-color:red;">Fake</h2>
      <img id="leftPreview">
    </div>
    <div class="img-container">
      <h2 style="background-color:green;">Fact</h2>
      <img id="rightPreview">
    </div>
  </div>

  <div id="result"></div>

  <script>
    let fakeImageSrc = "";
    let factImageSrc = "";

    function handleUpload(inputId, isFake, statusId) {
      const fileInput = document.getElementById(inputId);
      const file = fileInput.files[0];
      if (!file) return;

      const reader = new FileReader();
      reader.onload = function (e) {
        if (isFake) {
          fakeImageSrc = e.target.result;
          document.getElementById("leftPreview").src = fakeImageSrc;
        } else {
          factImageSrc = e.target.result;
          document.getElementById("rightPreview").src = factImageSrc;
        }
        document.getElementById(statusId).innerText = "âœ“ Uploaded!";
      };
      reader.readAsDataURL(file);
    }

    function generateImage() {
      const twitterHandle = document.getElementById("twitterHandle").value.trim();
      if (!fakeImageSrc || !factImageSrc) {
        alert("Please upload both images.");
        return;
      }

      // Create the wrapper for combined images
      const wrapper = document.createElement("div");
      wrapper.style.position = "relative";
      wrapper.style.display = "flex";
      wrapper.style.width = "640px";  // Fixed width for combined image
      wrapper.style.margin = "0 auto";
      wrapper.style.background = "white";
      wrapper.style.gap = "20px";  // Space between images

      // Left box (Fake Image)
      const leftBox = createImageBox(fakeImageSrc, "Fake", "red", true);
      wrapper.appendChild(leftBox);

      // Right box (Fact Image)
      const rightBox = createImageBox(factImageSrc, "Fact", "green", false);
      wrapper.appendChild(rightBox);

      // Add Twitter handle watermark in center of the combined image
      if (twitterHandle) {
        const handleMark = document.createElement("div");
        handleMark.textContent = twitterHandle;
        handleMark.className = "center-handle";
        wrapper.appendChild(handleMark);
      }

      // Append the wrapper to body, render the combined image with html2canvas
      document.body.appendChild(wrapper);

      setTimeout(() => {
        html2canvas(wrapper).then(canvas => {
          document.body.removeChild(wrapper);
          const result = document.getElementById("result");
          result.innerHTML = "";
          result.appendChild(canvas);

          const link = document.createElement("a");
          link.textContent = "Download Combined Image";
          link.style.display = "block";
          link.style.margin = "20px auto";
          link.style.fontSize = "18px";
          link.style.color = "#007BFF";
          link.style.cursor = "pointer";

          link.onclick = () => {
            const a = document.createElement("a");
            a.href = canvas.toDataURL("image/png");
            a.download = "fake_vs_fact.png";
            a.click();
          };

          result.appendChild(link);
        });
      }, 500);
    }

    function createImageBox(src, label, bgColor, addWatermark) {
      const box = document.createElement("div");
      box.style.position = "relative";
      box.style.textAlign = "center";

      const heading = document.createElement("h2");
      heading.textContent = label;
      heading.style.backgroundColor = bgColor;
      heading.style.color = "white";
      heading.style.margin = "0";
      heading.style.padding = "5px";

      const img = document.createElement("img");
      img.src = src;
      img.style.maxWidth = "300px";
      img.style.marginTop = "5px";

      box.appendChild(heading);
      box.appendChild(img);

      if (addWatermark) {
        const wm = document.createElement("div");
        wm.className = "watermark";
        wm.textContent = "FAKE NEWS";
        box.appendChild(wm);
      }

      return box;
    }
  </script>

</body>
</html>
